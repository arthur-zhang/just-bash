# just-bash TypeScript to Rust è¿ç§»è·¯çº¿å›¾

## è¿ç§»çŠ¶æ€æ€»ç»“

### å·²å®Œæˆè¿ç§» (Rust é¡¹ç›®ä¸­å·²æœ‰)
- **parser/** - å®Œæˆ (11 æ–‡ä»¶, 8,105 è¡Œ)
- **interpreter/** - å®Œæˆ (90 æ–‡ä»¶, ~38,000 è¡Œ)
  - builtins/ - 28 ä¸ªå†…ç½®å‘½ä»¤
  - expansion/ - å‚æ•°å±•å¼€
  - helpers/ - è¾…åŠ©å·¥å…·
  - **execution_engine.rs** - âœ… æ–°å¢ï¼šæ ¸å¿ƒæ‰§è¡Œå¼•æ“
  - **sync_fs_adapter.rs** - âœ… æ–°å¢ï¼šAsync/Sync æ–‡ä»¶ç³»ç»Ÿé€‚é…å™¨
- **ast/** - å®Œæˆ (2 æ–‡ä»¶, 1,161 è¡Œ)
- **fs/** - âœ… å®Œæˆ (3 æ–‡ä»¶, ~1,200 è¡Œ)
  - types.rs - FileSystem trait å’Œç±»å‹å®šä¹‰
  - in_memory_fs.rs - å†…å­˜æ–‡ä»¶ç³»ç»Ÿå®ç°
- **bash.rs** - âœ… å®Œæˆ (~400 è¡Œ) - ä¸»ç¯å¢ƒç±»

### å°šæœªè¿ç§»çš„æ¨¡å—

| æ¨¡å— | æ–‡ä»¶æ•° | ä»£ç è¡Œæ•° | ä¼˜å…ˆçº§ | è¯´æ˜ |
|------|--------|----------|--------|------|
| ~~**filesystem/**~~ | ~~18~~ | ~~7,550~~ | âœ… å®Œæˆ | è™šæ‹Ÿæ–‡ä»¶ç³»ç»ŸæŠ½è±¡å±‚ |
| **commands/** | 364 | 97,146 | ğŸ”´ é«˜ | 70+ Unix å‘½ä»¤å®ç° |
| ~~**Bash.ts**~~ | ~~1~~ | ~~~20,000~~ | âœ… å®Œæˆ | ä¸»ç¯å¢ƒç±»ï¼Œæ•´åˆæ‰€æœ‰æ¨¡å— |
| **shell/** (glob) | 2 | 1,387 | ğŸŸ¡ ä¸­ | glob æ¨¡å¼åŒ¹é… |
| **network/** | 9 | 2,629 | ğŸŸ¡ ä¸­ | å®‰å…¨ç½‘ç»œè®¿é—® |
| **sandbox/** | 4 | 642 | ğŸŸ¢ ä½ | Vercel å…¼å®¹ API |
| **cli/** | 6 | 1,367 | ğŸŸ¢ ä½ | å‘½ä»¤è¡Œæ¥å£ |
| **æµ‹è¯•ä»£ç ** | ~70 | ~16,000 | ğŸŸ¢ ä½ | å„ç±»æµ‹è¯• |

---

## è¿ç§»é˜¶æ®µè§„åˆ’

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒåŸºç¡€è®¾æ–½ âœ… å®Œæˆ

#### 1.1 filesystem/ - è™šæ‹Ÿæ–‡ä»¶ç³»ç»Ÿ âœ…
**çŠ¶æ€**: å·²å®Œæˆ

å®ç°çš„æ–‡ä»¶:
- `src/fs/mod.rs` - æ¨¡å—å¯¼å‡º
- `src/fs/types.rs` - FileSystem trait, FsError, FsStat, ç¼–ç å·¥å…·
- `src/fs/in_memory_fs.rs` - InMemoryFs å®Œæ•´å®ç°ï¼ˆç¬¦å·é“¾æ¥ã€æƒé™ã€ç›®å½•æ“ä½œç­‰ï¼‰

#### 1.2 Bash.ts - ä¸»ç¯å¢ƒç±» âœ…
**çŠ¶æ€**: å·²å®Œæˆ

å®ç°çš„æ–‡ä»¶:
- `src/bash.rs` - Bash ä¸»ç±»
- `src/interpreter/execution_engine.rs` - æ‰§è¡Œå¼•æ“
- `src/interpreter/sync_fs_adapter.rs` - Async/Sync é€‚é…å™¨

å·²å®ç°åŠŸèƒ½:
- âœ… `Bash::new()` - åˆ›å»ºç¯å¢ƒï¼Œåˆå§‹åŒ–æ–‡ä»¶ç³»ç»Ÿ
- âœ… `Bash::exec()` - æ‰§è¡Œè„šæœ¬ï¼Œè¿”å› ExecResult
- âœ… å˜é‡å±•å¼€ (`$VAR`)
- âœ… æ§åˆ¶æµ (if/for/while/until)
- âœ… åŸºæœ¬å‘½ä»¤ (echo, cd, pwd, exit, export, true, false)
- âœ… é€»è¾‘æ“ä½œç¬¦ (`&&`, `||`)
- âœ… subshell `(...)` å’Œ group `{ ...; }`

---

### ç¬¬äºŒé˜¶æ®µï¼šå‘½ä»¤å®ç° âœ… æ‰¹æ¬¡ A+B å®Œæˆ

#### æ‰¹æ¬¡ A - åŸºç¡€å‘½ä»¤ âœ… å®Œæˆäº 2026-02-06
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| echo | ~100 | âœ… å·²å®ç° | è¾“å‡ºæ–‡æœ¬ |
| cat | ~200 | âœ… å·²å®ç° | è¿æ¥æ–‡ä»¶ï¼Œæ”¯æŒ -n |
| head | ~150 | âœ… å·²å®ç° | æ˜¾ç¤ºå¼€å¤´ï¼Œæ”¯æŒ -n/-c |
| tail | ~200 | âœ… å·²å®ç° | æ˜¾ç¤ºç»“å°¾ï¼Œæ”¯æŒ +N |
| wc | ~150 | âœ… å·²å®ç° | å­—æ•°ç»Ÿè®¡ï¼Œæ”¯æŒ -l/-w/-c |
| ls | ~400 | âœ… å·²å®ç° | åˆ—å‡ºç›®å½•ï¼Œæ”¯æŒ -la/-h |
| mkdir | ~100 | âœ… å·²å®ç° | åˆ›å»ºç›®å½•ï¼Œæ”¯æŒ -p |
| rm | ~150 | âœ… å·²å®ç° | åˆ é™¤æ–‡ä»¶ï¼Œæ”¯æŒ -rf |
| cp | ~250 | âœ… å·²å®ç° | å¤åˆ¶æ–‡ä»¶ï¼Œæ”¯æŒ -r/-n |
| mv | ~150 | âœ… å·²å®ç° | ç§»åŠ¨æ–‡ä»¶ï¼Œæ”¯æŒ -n |
| touch | ~100 | âœ… å·²å®ç° | æ›´æ–°æ—¶é—´æˆ³ï¼Œæ”¯æŒ -c |
| pwd | ~50 | âœ… å·²å®ç° | å½“å‰ç›®å½• |
| basename | ~80 | âœ… å·²å®ç° | æå–æ–‡ä»¶åï¼Œæ”¯æŒ -a/-s |
| dirname | ~80 | âœ… å·²å®ç° | æå–ç›®å½•å |
| grep | ~675 | âœ… å·²å®ç° | æ¨¡å¼åŒ¹é…ï¼Œæ”¯æŒæ­£åˆ™ |
| test/[ | ~200 | âœ… å·²å®ç° | æ¡ä»¶æµ‹è¯• |
| true/false | ~20 | âœ… å·²å®ç° | è¿”å›çŠ¶æ€ |

**æ‰¹æ¬¡ A å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 17 ä¸ª
- æ–°å¢ä»£ç : ~2,500 è¡Œ
- æ–°å¢æµ‹è¯•: 74 ä¸ª
- æ€»æµ‹è¯•æ•°: 834 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

#### æ‰¹æ¬¡ B - æ–‡æœ¬å¤„ç† âœ… å®Œæˆäº 2026-02-06
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| uniq | ~100 | âœ… å·²å®ç° | å»é‡ï¼Œæ”¯æŒ -c/-d/-u/-i |
| cut | ~200 | âœ… å·²å®ç° | åˆ‡å‰²å­—æ®µï¼Œæ”¯æŒ -c/-f/-d/-s |
| nl | ~150 | âœ… å·²å®ç° | è¡Œå·ï¼Œæ”¯æŒ -b/-n/-w/-s/-v/-i |
| tr | ~200 | âœ… å·²å®ç° | å­—ç¬¦è½¬æ¢ï¼Œæ”¯æŒ -d/-s/-c |
| paste | ~100 | âœ… å·²å®ç° | åˆå¹¶è¡Œï¼Œæ”¯æŒ -d/-s |
| join | ~250 | âœ… å·²å®ç° | è¿æ¥è¡Œï¼Œæ”¯æŒ -1/-2/-t/-a/-v/-e/-o/-i |
| sort | ~350 | âœ… å·²å®ç° | æ’åºï¼Œæ”¯æŒ -r/-n/-u/-f/-k/-t/-c/-h/-V/-M |
| sed | ~1,500 | âœ… å·²å®ç° | æµç¼–è¾‘å™¨ï¼Œæ”¯æŒ s/d/p/a/i/c/h/H/g/G/x/n/N/y/=/l/b/t/T/q/Q/z/P/D/r/w |
| awk | ~5,000 | âœ… å·²å®ç° | AWK è§£é‡Šå™¨ï¼ˆ12 æ¨¡å—ï¼štypes/coercion/lexer/parser/context/fields/variables/builtins/expressions/statements/interpreter/modï¼‰ |

**æ‰¹æ¬¡ B å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 9 ä¸ªï¼ˆå« sort/comparator.rsï¼‰
- æ–°å¢ä»£ç : ~2,500 è¡Œ
- æ–°å¢æµ‹è¯•: 85 ä¸ª
- æ€»æµ‹è¯•æ•°: 919 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

#### æ‰¹æ¬¡ B è¡¥å…… - sed âœ… å®Œæˆäº 2026-02-06
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| sed | ~3,500 | âœ… å·²å®ç° | æµç¼–è¾‘å™¨ï¼ˆ6 æ¨¡å—ï¼štypes/lexer/parser/regex_utils/executor/modï¼‰ |

**sed å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 6 ä¸ªï¼ˆtypes.rs, lexer.rs, parser.rs, regex_utils.rs, executor.rs, mod.rsï¼‰
- æ–°å¢ä»£ç : ~3,500 è¡Œ
- æ–°å¢æµ‹è¯•: 115 ä¸ªï¼ˆ10 regex + 14 lexer + 13 parser + 33 executor + 45 integrationï¼‰
- æ€»æµ‹è¯•æ•°: 1,034 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

#### æ‰¹æ¬¡ B è¡¥å…… - awk âœ… å®Œæˆäº 2026-02-06
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| awk | ~5,000 | âœ… å·²å®ç° | AWK è§£é‡Šå™¨ï¼ˆ12 æ¨¡å—ï¼štypes/coercion/lexer/parser/context/fields/variables/builtins/expressions/statements/interpreter/modï¼‰ |

**awk å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 12 ä¸ª
- æ–°å¢ä»£ç : ~5,000 è¡Œ
- æ–°å¢æµ‹è¯•: 346 ä¸ªï¼ˆ31 coercion + 20 lexer + 29 parser + 10 context + 16 fields + 12 variables + 45 builtins + 57 expressions + 26 statements + 18 interpreter + 60 integration + 22 miscï¼‰
- æ€»æµ‹è¯•æ•°: 1,380 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

#### æ‰¹æ¬¡ C - æ•°æ®æ ¼å¼ âœ… å®Œæˆäº 2026-02-07
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| jq | ~960 | âœ… å·²å®ç° | JSON å¤„ç†ï¼ˆå…±äº« query-engineï¼‰ |
| yq | ~2,036 | âœ… å·²å®ç° | YAML/JSON/XML/INI/CSV/TOML å¤„ç†ï¼ˆformats.rs + mod.rsï¼‰ |
| query-engine | ~8,276 | âœ… å·²å®ç° | å…±äº«æŸ¥è¯¢å¼•æ“ï¼ˆ8 æ¨¡å—ï¼švalue/ast/lexer/parser/evaluator/context/operations/modï¼‰ |

**æ‰¹æ¬¡ C å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 11 ä¸ªï¼ˆquery_engine: 8, jq: 1, yq: 2ï¼‰
- æ–°å¢ä»£ç : ~11,272 è¡Œ
- æ–°å¢æµ‹è¯•: 239 ä¸ªï¼ˆ25 operations + 31 lexer + 36 parser + 73 evaluator + 35 jq + 17 yq-formats + 22 yq-commandï¼‰
- æ€»æµ‹è¯•æ•°: 1,619 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

#### æ‰¹æ¬¡ D - å…¶ä»– âœ… å®Œæˆäº 2026-02-07
| å‘½ä»¤ | è¡Œæ•° | çŠ¶æ€ | è¯´æ˜ |
|------|------|------|------|
| base64 | ~368 | âœ… å·²å®ç° | ç¼–ç /è§£ç ï¼Œæ”¯æŒ -d/-w |
| diff | ~335 | âœ… å·²å®ç° | æ–‡ä»¶æ¯”è¾ƒï¼Œæ”¯æŒ -u/-q/-s/-iï¼ˆä½¿ç”¨ similar åº“ï¼‰ |
| gzip | ~1,096 | âœ… å·²å®ç° | å‹ç¼©/è§£å‹ï¼ˆgzip/gunzip/zcatï¼‰ï¼Œæ”¯æŒ -c/-d/-f/-k/-l/-n/-N/-r/-S/-t/-v/-1~-9 |
| find | ~2,393 | âœ… å·²å®ç° | æŸ¥æ‰¾æ–‡ä»¶ï¼ˆ4 æ¨¡å—ï¼štypes/parser/matcher/modï¼‰ï¼Œæ”¯æŒ -name/-type/-size/-mtime/-exec/-delete/-printf ç­‰ |
| tar | ~2,858 | âœ… å·²å®ç° | å½’æ¡£ï¼ˆ3 æ¨¡å—ï¼šoptions/archive/modï¼‰ï¼Œæ”¯æŒ -c/-x/-t/-r/-u/-z/-v/-C/--exclude/--strip |
| xargs | ~428 | âœ… å·²å®ç° | æ„å»ºå‘½ä»¤ï¼Œæ”¯æŒ -I/-d/-n/-P/-0/-t/-r |
| curl | ~1,385 | âœ… å·²å®ç° | HTTP å®¢æˆ·ç«¯ï¼ˆ5 æ¨¡å—ï¼štypes/parse/form/response_formatting/modï¼‰ï¼Œæ”¯æŒ -X/-H/-d/-F/-o/-i/-L/-f/-s/-v/-u/-w |

**æ‰¹æ¬¡ D å®ç°ç»Ÿè®¡**:
- æ–°å¢æ–‡ä»¶: 16 ä¸ªï¼ˆbase64: 1, diff: 1, gzip: 1, find: 4, tar: 3, xargs: 1, curl: 5, types.rs æ‰©å±•ï¼‰
- æ–°å¢ä»£ç : ~8,863 è¡Œ
- æ–°å¢æµ‹è¯•: 269 ä¸ªï¼ˆ15 base64 + 12 diff + 30 gzip + 19 find-parser + 25 find-matcher + 20 find-command + 25 tar-options + 21 tar-archive + 29 tar-command + 15 xargs + 54 curl + 4 miscï¼‰
- æ€»æµ‹è¯•æ•°: 1,888 ä¸ªï¼ˆå…¨éƒ¨é€šè¿‡ï¼‰

---

### ç¬¬ä¸‰é˜¶æ®µï¼šè¾…åŠ©æ¨¡å—

#### 3.1 shell/glob - Glob æ¨¡å¼åŒ¹é…
- `glob.ts` (1,043 è¡Œ)
- `glob-to-regex.ts` (344 è¡Œ)

#### 3.2 network/ - ç½‘ç»œè®¿é—®æ§åˆ¶
- URL ç™½åå•éªŒè¯
- å®‰å…¨ fetch åŒ…è£…
- é‡å®šå‘å¤„ç†

---

### ç¬¬å››é˜¶æ®µï¼šæ¥å£å±‚

#### 4.1 cli/ - å‘½ä»¤è¡Œæ¥å£
- è„šæœ¬æ‰§è¡Œ
- äº¤äº’å¼ shell
- å®‰å…¨é€‰é¡¹

#### 4.2 sandbox/ - Vercel å…¼å®¹ API
- `runCommand()`
- `writeFiles()`
- `readFile()`

---

## å½“å‰è¿›åº¦

- [x] ç¬¬ä¸€é˜¶æ®µè§„åˆ’
- [x] ç¬¬ä¸€é˜¶æ®µå®ç° âœ… **å®Œæˆäº 2026-02-06**
  - [x] filesystem/ - InMemoryFs å®Œæ•´å®ç°
  - [x] Bash.ts ä¸»ç±» - æ‰§è¡Œå¼•æ“æ¥å…¥
  - [x] 760 ä¸ªæµ‹è¯•å…¨éƒ¨é€šè¿‡
- [x] ç¬¬äºŒé˜¶æ®µ - å‘½ä»¤å®ç°
  - [x] æ‰¹æ¬¡ A - åŸºç¡€å‘½ä»¤ âœ… 834 ä¸ªæµ‹è¯•
  - [x] æ‰¹æ¬¡ B - æ–‡æœ¬å¤„ç† âœ… 919 ä¸ªæµ‹è¯•
  - [x] æ‰¹æ¬¡ B è¡¥å…… - sed âœ… 1,034 ä¸ªæµ‹è¯•
  - [x] æ‰¹æ¬¡ B è¡¥å…… - awk âœ… 1,380 ä¸ªæµ‹è¯•
  - [x] æ‰¹æ¬¡ C - æ•°æ®æ ¼å¼ âœ… 1,619 ä¸ªæµ‹è¯•
  - [x] æ‰¹æ¬¡ D - å…¶ä»– âœ… 1,888 ä¸ªæµ‹è¯•
- [ ] ç¬¬ä¸‰é˜¶æ®µ - è¾…åŠ©æ¨¡å—
- [ ] ç¬¬å››é˜¶æ®µ - æ¥å£å±‚

---

## æµ‹è¯•ç»Ÿè®¡

| æ¨¡å— | æµ‹è¯•æ•°é‡ | çŠ¶æ€ |
|------|----------|------|
| parser | 11 | âœ… |
| interpreter | 725 | âœ… |
| fs | 11 | âœ… |
| bash | 15 | âœ… |
| sync_fs_adapter | 7 | âœ… |
| execution_engine | 10 | âœ… |
| commands (batch A) | 74 | âœ… |
| commands (batch B) | 85 | âœ… |
| commands (sed) | 115 | âœ… |
| commands (awk) | 346 | âœ… |
| commands (batch C: jq/yq) | 239 | âœ… |
| commands (batch D) | 269 | âœ… |
| **æ€»è®¡** | **1,888** | âœ… |
